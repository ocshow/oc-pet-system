<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#ff86b2" />
    <title>OC 独立聊天</title>
    <link rel="apple-touch-icon" href="assets/pal-001.png" />
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body style="margin:0;">
    <!-- 聊天头部 -->
    <header id="chat-header" class="chat-header" style="background: linear-gradient(135deg, #fba8c6, #ff6b9d); color: white; padding: 16px 20px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 4px 20px rgba(255,134,178,0.3); backdrop-filter: blur(10px);">
      <button id="chat-back-btn" class="btn btn-secondary" style="background: rgba(255,255,255,0.15); border: none; color: white; padding: 10px; border-radius: 12px; cursor: pointer; transition: all 0.2s ease; backdrop-filter: blur(5px); flex-shrink: 0;" title="返回主页">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
      </button>
      <h1 id="chat-title" style="margin: 0; font-size: 20px; font-weight: 700; text-shadow: 0 2px 4px rgba(0,0,0,0.1); text-align: center; flex: 1;">—</h1>
      <button id="chat-personality-btn" class="btn btn-secondary" style="background: rgba(255,255,255,0.15); border: none; color: white; padding: 10px; border-radius: 12px; cursor: pointer; transition: all 0.2s ease; backdrop-filter: blur(5px); flex-shrink: 0;" title="OC人设设置">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 20h9M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
        </svg>
      </button>
    </header>
    
    <main class="main" style="padding:16px;">
      <div class="chat-section" aria-label="OC聊天" style="max-width: 860px; margin: 0 auto; height: calc(100vh - 120px); max-height: none;">
        <div id="chat-messages" class="chat-messages" role="log" aria-live="polite"></div>
        <div class="chat-input-row" style="grid-template-columns: 1fr auto auto;">
          <input id="chat-input" type="text" class="chat-input" placeholder="和TA聊点什么吧… " maxlength="500" />
          <button id="chat-send" class="btn btn-primary">发送</button>
          <button id="chat-settings" class="btn btn-secondary" title="AI设置">⚙️</button>
        </div>
      </div>
    </main>

    <!-- AI 设置弹窗 -->
    <dialog id="ai-settings-dialog" class="dialog" aria-labelledby="ai-settings-title">
      <div class="dialog-body">
        <h3 id="ai-settings-title" class="dialog-title">AI 设置</h3>
        <div class="field">
          <span>服务提供商</span>
          <select id="ai-provider">
            <option value="custom">自定义</option>
            <option value="openai">OpenAI</option>
            <option value="openrouter">OpenRouter</option>
            <option value="siliconflow">硅基流动 (SiliconFlow)</option>
          </select>
        </div>
        <div class="field">
          <span>API Base URL</span>
          <input id="ai-base-url" type="url" placeholder="例如：https://api.openai.com" />
        </div>
        <div class="field">
          <span>API Path</span>
          <input id="ai-path" type="text" placeholder="/v1/chat/completions" />
        </div>
        <div class="field">
          <span>Model</span>
          <input id="ai-model" type="text" placeholder="gpt-3.5-turbo 或其他兼容模型" />
        </div>
        <div class="field">
          <span>API Key</span>
          <input id="ai-api-key" type="password" placeholder="输入你的API Key" />
        </div>
        <div class="dialog-actions">
          <button id="ai-settings-cancel" class="btn btn-secondary">取消</button>
          <button id="ai-settings-save" class="btn btn-primary">保存</button>
        </div>
      </div>
    </dialog>

    <!-- OC人设设置弹窗 -->
    <dialog id="personality-dialog" class="dialog" aria-labelledby="personality-title">
      <div class="dialog-body">
        <h3 id="personality-title" class="dialog-title">OC人设设置</h3>
        <div class="field">
          <span>性格特点</span>
          <textarea id="personality-traits" placeholder="描述OC的性格特点，例如：活泼开朗、温柔体贴、傲娇可爱等" rows="3"></textarea>
        </div>
        <div class="field">
          <span>说话风格</span>
          <textarea id="personality-speech" placeholder="描述OC的说话风格，例如：喜欢用"喵"结尾、说话简短可爱、会用特殊语气词等" rows="3"></textarea>
        </div>
        <div class="field">
          <span>兴趣爱好</span>
          <textarea id="personality-hobbies" placeholder="描述OC的兴趣爱好，例如：喜欢晒太阳、爱玩毛线球、喜欢吃鱼等" rows="3"></textarea>
        </div>
        <div class="field">
          <span>背景设定</span>
          <textarea id="personality-background" placeholder="描述OC的背景设定，例如：来自魔法森林的小精灵、被主人收养的流浪猫等" rows="3"></textarea>
        </div>
        <div class="dialog-actions">
          <button id="personality-cancel" class="btn btn-secondary">取消</button>
          <button id="add-sample-interactions" class="btn btn-secondary">添加示例互动</button>
          <button id="personality-save" class="btn btn-primary">保存</button>
        </div>
      </div>
    </dialog>
    <script src="js/chat.js"></script>
  </body>
  </html>


